<% include ../partials/header.ejs %>

<main class="container">
    <div class="panel panel-default">
        <div class="panel-heading">
            <a href="/users/add" title="Add User"><i class="fa fa-plus-circle"></i> Add a new User</a>
        </div> <!-- panel-heading -->
        <% if (user.length > 0) { %>
        <div class="panel-body table-responsive">
            <table class="table table-bordered table-striped table-hover">
                <thead>
                    <tr>
                        <th>User ID</th>
                        <th>Display Name</th>
                        <th>Email</th>
                        <th>Date Created</th>
                        <th>Date Updated</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                <% for (var i = 0; i < user.length; i++) { %>
                <tr>
                    <td>
                        <%= user[i].username %>
                    </td>
                    <td>
                        <%= user[i].displayName %>
                    </td>
                    <td>
                        <%= user[i].email %>
                    </td>
                    <td>
                        <% var date = new Date(user[i].created);
                         var dateString = date.toDateString() + " " + date.toLocaleTimeString(); %>
                        <%= dateString %>
                    </td>
                    <td>
                        <% date = new Date(user[i].updated);
                         var dateString = date.toDateString() + " " + date.toLocaleTimeString(); %>
                        <%= dateString %>
                    </td>
                    <td>
                        <a href="/users/<%= user[i]._id %>" title="Edit" class="btn btn-primary">
                            <i class="fa fa-pencil-square-o"></i>
                        </a>
                        <a href="/users/delete/<%= user[i]._id %>" title="Delete" onclick="return confirm('Are you sure you want to delete this?');" class="btn btn-danger">
                            <i class="fa fa-trash-o"></i>
                        </a>
                    </td>   
                </tr>
                <% } %>
                </tbody>
            </table>
        </div> <!-- panel-body -->
        <% } %>
    </div><!-- panel panel-default -->

</main>
<% include ../partials/boot.ejs %>
<% include ../partials/footer.ejs %>